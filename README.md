**任务描述：基于ZigBee模块（白板）进行基础开发，上电先让LED1，LED2灭。然后通过按键SW1控制是否采集传感器数据，按键SW1按下，则先往串口发送一句“开始1秒循环采集”，接着定时器每隔1秒进行光敏传感数据的定时采集，并把采集到的光敏传感数据发送到串口。再次按下按键SW1，则先往串口发送一句“开始3秒循环采集”，接着定时器每隔3秒进行光敏传感数据的定时采集，并把采集到的光敏传感数据发送到串口。再次按下按键SW1，则先往串口发送一句“停止采集”，然后停止采集和发送。并且在1秒循环采集的时候LED1，LED2闪烁时间为1秒，在3秒循环采集的时候LED1，LED2闪烁时间为3秒，停止采集的时候LED1，LED2灭。**

**设备列表：**

1.  ZigBee模块（白板）1块
1.  NEWLab智慧盒（含USB连接线）1个
2.  CC Debugger烧写器1个
3.  温湿度光敏传感器1个（或光敏二极管传感器）

**接线说明：**

把ZigBee模块（白板）放到智慧盒上，智慧盒用串口线与PC机相连。

**注意事项：**

**如果ZigBee模块（白板）上有JP2拨码开关，请确保JP2拨向左边J9处，如果没有JP2拨码开关则可以不用处理。**

**任务要求：**

在 “C:\\JoyWork\\01\\work\\Task\\”文件夹下创建IAR工程，工程名字和工作空间的名字均为：“Task+准考证号后12位”，把“Task” 文件夹下的“test.c”添加到IAR工程中，配置好工程选项参数，确保工程编译成功。（4分）。在“test.c”中添加代码实现以下功能：

1、按键SW1(P1_2)配置成采用中断的方式进行控制，上拉输入模式,下降沿触发中断。（5分）

2、光敏传感器插在ZigBee模块的传感器插槽上，查看相关的电路图和数据手册，设置采集光敏传感器的引脚初始化和ADC相关参数，ADC要求配置为： 3.3V电压(AVDD5引脚)、256位抽取率、AIN0单通道。（4分）

3、串口通信要求使用串口0的备用位置1: P0_2 (RX), P0_3(TX)，波特率38400，奇偶校验无，1位停止位，8位数据位。（5分）

4、实现每次按下按键后在往串口发送光敏传感器数据之前发送的提示信息。（3分）

（1）实现先往串口发送“开始1秒循环采集”

（2）实现先往串口发送“开始3秒循环采集”

（3）实现先往串口发送“停止采集”

5、在定时器中断函数里实现功能1：第一次按下按键SW1，处理隔1秒把光敏传感数据发送到串口，且LED1,LED2每1秒闪烁一次。要求使用定义好的变量“light_val”来作为获取到的传感器的值的存放地址。（13分）

6、在定时器中断函数里实现功能2：第二次按下按键SW1，处理隔3秒把光敏传感数据发送到串口，且LED1,LED2每3秒闪烁一次。要求使用定义好的变量“light_val”来作为获取到的传感器的值的存放地址。（13分）

**7、考试时间截止后，确保“图集.docx”和源码工程文件已保存后，对work文件夹进行压缩，点击“上传文件”将压缩后的“work.zip”上传至服务器指定目录。**
